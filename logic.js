const board = {
    tile1: {
        name: "tile1",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile2: {
        name: "tile2",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile3: {
        name: "tile3",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile4: {
        name: "tile4",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile5: {
        name: "tile5",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile6: {
        name: "tile6",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile7: {
        name: "tile7",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile8: {
        name: "tile8",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile9: {
        name: "tile9",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile10: {
        name: "tile10",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile11: {
        name: "tile11",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile12: {
        name: "tile12",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },    
    tile13: {
        name: "tile13",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile14: {
        name: "tile14",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile15: {
        name: "tile15",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile16: {
        name: "tile16",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile17: {
        name: "tile17",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile18: {
        name: "tile18",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile19: {
        name: "tile19",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile20: {
        name: "tile20",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile21: {
        name: "tile21",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    tile22: {
        name: "tile22",
        resource: null,
        number: 0,
        playerOne: 0,
        playerTwo: 0,
        playerThree: 0,
        playerFour: 0,
    },
    house1: {
        type: "empty",
        name: "house1",
        playerOwns: null,
    },
    house2: {
        type: "empty",
        name: "house2",
        playerOwns: null,
    },
    house3: {
        type: "empty",
        name: "house3",
        playerOwns: null,
    },
    house4: {
        type: "empty",
        name: "house4",
        playerOwns: null,
    },
    house5: {
        type: "empty",
        name: "house5",
        playerOwns: null,
    },
    house6: {
        type: "empty",
        name: "house6",
        playerOwns: null,
    },
    house7: {
        type: "empty",
        name: "house7",
        playerOwns: null,
    },
    house8: {
        type: "empty",
        name: "house8",
        playerOwns: null,
    },
    house9: {
        type: "empty",
        name: "house9",
        playerOwns: null,
    },
    house10: {
        type: "empty",
        name: "house10",
        playerOwns: null,
    },
    house11: {
        type: "empty",
        name: "house11",
        playerOwns: null,
    },
    house12: {
        type: "empty",
        name: "house12",
        playerOwns: null,
    },
    house13: {
        type: "empty",
        name: "house13",
        playerOwns: null,
    },
    house14: {
        type: "empty",
        name: "house14",
        playerOwns: null,
    },
    house15: {
        type: "empty",
        name: "house15",
        playerOwns: null,
    },
    house16: {
        type: "empty",
        name: "house16",
        playerOwns: null,
    },
    house17: {
        type: "empty",
        name: "house17",
        playerOwns: null,
    },
    house18: {
        type: "empty",
        name: "house18",
        playerOwns: null,
    },
    house19: {
        type: "empty",
        name: "house19",
        playerOwns: null,
    },
    house20: {
        type: "empty",
        name: "house20",
        playerOwns: null,
    },
    house21: {
        type: "empty",
        name: "house21",
        playerOwns: null,
    },
    house22: {
        type: "empty",
        name: "house22",
        playerOwns: null,
    },
    house23: {
        type: "empty",
        name: "house23",
        playerOwns: null,
    },
    house24: {
        type: "empty",
        name: "house24",
        playerOwns: null,
    },
    house25: {
        type: "empty",
        name: "house25",
        playerOwns: null,
    },
    house26: {
        type: "empty",
        name: "house26",
        playerOwns: null,
    },
    house27: {
        type: "empty",
        name: "house27",
        playerOwns: null,
    },
    house28: {
        type: "empty",
        name: "house28",
        playerOwns: null,
    },
    house29: {
        type: "empty",
        name: "house29",
        playerOwns: null,
    },
    house30: {
        type: "empty",
        name: "house30",
        playerOwns: null,
    },
    house31: {
        type: "empty",
        name: "house31",
        playerOwns: null,
    },
    house32: {
        type: "empty",
        name: "house32",
        playerOwns: null,
    },
    house33: {
        type: "empty",
        name: "house33",
        playerOwns: null,
    },
    house34: {
        type: "empty",
        name: "house34",
        playerOwns: null,
    },
    house35: {
        type: "empty",
        name: "house35",
        playerOwns: null,
    },
    house36: {
        type: "empty",
        name: "house36",
        playerOwns: null,
    },
    house37: {
        type: "empty",
        name: "house37",
        playerOwns: null,
    },
    house38: {
        type: "empty",
        name: "house38",
        playerOwns: null,
    },
    house39: {
        type: "empty",
        name: "house39",
        playerOwns: null,
    },
    house40: {
        type: "empty",
        name: "house40",
        playerOwns: null,
    },
    house41: {
        type: "empty",
        name: "house41",
        playerOwns: null,
    },
    house42: {
        type: "empty",
        name: "house42",
        playerOwns: null,
    },
    house43: {
        type: "empty",
        name: "house43",
        playerOwns: null,
    },
    house44: {
        type: "empty",
        name: "house44",
        playerOwns: null,
    },
    house45: {
        type: "empty",
        name: "house45",
        playerOwns: null,
    },
    house46: {
        type: "empty",
        name: "house46",
        playerOwns: null,
    },
    house47: {
        type: "empty",
        name: "house47",
        playerOwns: null,
    },
    house48: {
        type: "empty",
        name: "house48",
        playerOwns: null,
    },
    house49: {
        type: "empty",
        name: "house49",
        playerOwns: null,
    },
    house50: {
        type: "empty",
        name: "house50",
        playerOwns: null,
    },
    house51: {
        type: "empty",
        name: "house51",
        playerOwns: null,
    },
    house52: {
        type: "empty",
        name: "house52",
        playerOwns: null,
    },
    house53: {
        type: "empty",
        name: "house53",
        playerOwns: null,
    },
    house54: {
        type: "empty",
        name: "house54",
        playerOwns: null,
    },
    house55: {
        type: "empty",
        name: "house55",
        playerOwns: null,
    },
    house56: {
        type: "empty",
        name: "house56",
        playerOwns: null,
    },
    house57: {
        type: "empty",
        name: "house57",
        playerOwns: null,
    },
    house58: {
        type: "empty",
        name: "house58",
        playerOwns: null,
    },
    house59: {
        type: "empty",
        name: "house59",
        playerOwns: null,
    },
    house60: {
        type: "empty",
        name: "house60",
        playerOwns: null,
    },
    house61: {
        type: "empty",
        name: "house61",
        playerOwns: null,
    },
    house62: {
        type: "empty",
        name: "house62",
        playerOwns: null,
    },
    road1: {
        type: "empty",
        name: "road1",
        playerOwns: null,
    },
    road2: {
        type: "empty",
        name: "road2",
        playerOwns: null,
    },
    road3: {
        type: "empty",
        name: "road3",
        playerOwns: null,
    },
    road4: {
        type: "empty",
        name: "road4",
        playerOwns: null,
    },
    road5: {
        type: "empty",
        name: "road5",
        playerOwns: null,
    },
    road6: {
        type: "empty",
        name: "road6",
        playerOwns: null,
    },
    road7: {
        type: "empty",
        name: "road7",
        playerOwns: null,
    },
    road8: {
        type: "empty",
        name: "road8",
        playerOwns: null,
    },
    road9: {
        type: "empty",
        name: "road9",
        playerOwns: null,
    },
    road10: {
        type: "empty",
        name: "road10",
        playerOwns: null,
    },
    road11: {
        type: "empty",
        name: "road11",
        playerOwns: null,
    },
    road12: {
        type: "empty",
        name: "road12",
        playerOwns: null,
    },
    road13: {
        type: "empty",
        name: "road13",
        playerOwns: null,
    },
    road14: {
        type: "empty",
        name: "road14",
        playerOwns: null,
    },
    road15: {
        type: "empty",
        name: "road15",
        playerOwns: null,
    },
    road16: {
        type: "empty",
        name: "road16",
        playerOwns: null,
    },
    road17: {
        type: "empty",
        name: "road17",
        playerOwns: null,
    },
    road18: {
        type: "empty",
        name: "road18",
        playerOwns: null,
    },
    road19: {
        type: "empty",
        name: "road19",
        playerOwns: null,
    },
    road20: {
        type: "empty",
        name: "road20",
        playerOwns: null,
    },
    road21: {
        type: "empty",
        name: "road21",
        playerOwns: null,
    },
    road22: {
        type: "empty",
        name: "road22",
        playerOwns: null,
    },
    road23: {
        type: "empty",
        name: "road23",
        playerOwns: null,
    },
    road24: {
        type: "empty",
        name: "road24",
        playerOwns: null,
    },
    road25: {
        type: "empty",
        name: "road25",
        playerOwns: null,
    },
    road26: {
        type: "empty",
        name: "road26",
        playerOwns: null,
    },
    road27: {
        type: "empty",
        name: "road27",
        playerOwns: null,
    },
    road28: {
        type: "empty",
        name: "road28",
        playerOwns: null,
    },
    road29: {
        type: "empty",
        name: "road29",
        playerOwns: null,
    },
    road30: {
        type: "empty",
        name: "road30",
        playerOwns: null,
    },
    road31: {
        type: "empty",
        name: "road31",
        playerOwns: null,
    },
    road32: {
        type: "empty",
        name: "road32",
        playerOwns: null,
    },
    road33: {
        type: "empty",
        name: "road33",
        playerOwns: null,
    },
    road34: {
        type: "empty",
        name: "road34",
        playerOwns: null,
    },
    road35: {
        type: "empty",
        name: "road35",
        playerOwns: null,
    },
    road36: {
        type: "empty",
        name: "road36",
        playerOwns: null,
    },
    road37: {
        type: "empty",
        name: "road37",
        playerOwns: null,
    },
    road38: {
        type: "empty",
        name: "road38",
        playerOwns: null,
    },
    road39: {
        type: "empty",
        name: "road39",
        playerOwns: null,
    },
    road40: {
        type: "empty",
        name: "road40",
        playerOwns: null,
    },
    road41: {
        type: "empty",
        name: "road41",
        playerOwns: null,
    },
    road42: {
        type: "empty",
        name: "road42",
        playerOwns: null,
    },
    road43: {
        type: "empty",
        name: "road43",
        playerOwns: null,
    },
    road44: {
        type: "empty",
        name: "road44",
        playerOwns: null,
    },
    road45: {
        type: "empty",
        name: "road45",
        playerOwns: null,
    },
    road46: {
        type: "empty",
        name: "road46",
        playerOwns: null,
    },
    road47: {
        type: "empty",
        name: "road47",
        playerOwns: null,
    },
    road48: {
        type: "empty",
        name: "road48",
        playerOwns: null,
    },
    road49: {
        type: "empty",
        name: "road49",
        playerOwns: null,
    },
    road50: {
        type: "empty",
        name: "road50",
        playerOwns: null,
    },
    road51: {
        type: "empty",
        name: "road51",
        playerOwns: null,
    },
    road52: {
        type: "empty",
        name: "road52",
        playerOwns: null,
    },
    road53: {
        type: "empty",
        name: "road53",
        playerOwns: null,
    },
    road54: {
        type: "empty",
        name: "road54",
        playerOwns: null,
    },
    road55: {
        type: "empty",
        name: "road55",
        playerOwns: null,
    },
    road56: {
        type: "empty",
        name: "road56",
        playerOwns: null,
    },
    road57: {
        type: "empty",
        name: "road57",
        playerOwns: null,
    },
    road58: {
        type: "empty",
        name: "road58",
        playerOwns: null,
    },
    road59: {
        type: "empty",
        name: "road59",
        playerOwns: null,
    },
    road60: {
        type: "empty",
        name: "road60",
        playerOwns: null,
    },
    road61: {
        type: "empty",
        name: "road61",
        playerOwns: null,
    },
    road62: {
        type: "empty",
        name: "road62",
        playerOwns: null,
    },
}

const tileNeighbors = {
    tile1: {
        houseNeighbor: [board.house1.name, board.house2.name, board.house3.name, board.house6.name, board.house7.name, board.house8.name],
        tileNeighbor: [board.tile2, board.tile3, board.tile4]
    },
    tile2: {
        houseNeighbor: [board.house3.name, board.house4.name, board.house5.name, board.house8.name, board.house9.name, board.house10.name],
        tileNeighbor: [board.tile1, board.tile4, board.tile5]
    },
    tile3: {
        houseNeighbor: [board.house6.name, board.house7.name, board.house11.name, board.house12.name],
        tileNeighbor: [board.tile1, board.tile4]
    },
    tile4: {
        houseNeighbor: [board.house7.name, board.house8.name, board.house9.name, board.house12.name, board.house13.name, board.house14.name],
        tileNeighbor: [board.tile1, board.tile2, board.tile3, board.tile5]
    },
    tile5: {
        houseNeighbor: [board.house9.name, board.house10.name, board.house14.name, board.house15.name],
        tileNeighbor: [board.tile2, board.tile4]
    }
};

const houseNeighbors = {
    house1: ["house2", "house6"],
    house2: ["house1", "house3"],
    house3: ["house2", "house4"],
}

function start() {
    let start = document.getElementById("start-menu");
    start.classList.add("hide");
    let resources = ["brick", "brick", "brick", "brick", "wood", "wood", "wood", "wood", "livestock", "livestock","livestock","livestock", "ore", "ore", "ore", "ore", "wheat","wheat","wheat","wheat", "water", "water"];
    let numbers = [3, 4, 5, 6, 7, 8, 9, 10, 11, 3, 4, 5, 6, 7, 8, 9, 10, 11, 5, 6, 8, 10];
    for (let i = 1; i < 23; i++) { 
    (function (i) {
            setTimeout(function () {
              console.log("hello");
            
         
        let resource = resources.splice(Math.floor(Math.random()*resources.length), 1);
        let number = numbers.splice(Math.floor(Math.random()*resources.length), 1);
        resource = resource.toString();
        number = number.toString();
        tile = "tile" + i
        console.log(tile);
        console.log(resource);
        board[tile].resource = resource;
        board[tile].number = number;
        let element = document.getElementById(tile);
        console.log(resources);
        
        element.classList.remove("deep-purple");
        switch(resource) {
            case "brick":
                element.classList.add("red");
                element.classList.add("darken-1");
              break;
            case "wood":
                element.classList.add("green");
                element.classList.add("darken-2");
              break;
            case "livestock":
                element.classList.add("light-green");
                element.classList.add("darken-1");
              break;
            case "ore":
                element.classList.add("grey");
                element.classList.add("darken-1");
              break;
            case "wheat":
                element.classList.add("amber");
              break;
            case "water":
                element.classList.add("light-blue");
                element.classList.add("accent-1");
              break;
          }
        element.innerHTML = board[tile].number;
    }, 100*i);})(i);
    }
    nextTurn(playerTurn);
}

class Player {
    constructor(name, color){
        this.name = name;
        this.color = color;
        this.brick = 0;
        this.wood = 0; 
        this.livestock = 0;

        this.addHouse = function(house) {
            console.log(this.brick)
            house = house.toString();
            console.log(house);
            board[house].playerOwns = this.name;
            console.log(board[house]);
            let element = document.getElementById(house);
            element.classList.add(this.color);
            for(let i = 1; i < 63; i++){
                let element = document.getElementById("house"+ i);
                element.classList.remove("house-hover");
            }
            element.classList.remove("hidden");
  
        }
        let houseHandler = (event) => {
            let e = event.target.id;
            let isHouse = e.startsWith("house");
            if (isHouse) {
            
              console.log("Clicked", e);
              this.addHouse(event.target.id)
              document.body.removeEventListener("click",houseHandler)
            }
          }
        this.callAddHouse = function() {
            document.body.addEventListener("click",houseHandler);
            for(let i = 1; i < 63; i++){
                let element = document.getElementById("house"+ i);
                element.classList.add("house-hover");
            }
        }
        this.addRoad = function(road) {
            console.log(this.brick)
            road = road.toString();
            console.log(road);
            board[road].playerOwns = this.name;
            console.log(board[road]);
            let element = document.getElementById(road);
            element.classList.add(this.color);
            for(let i = 1; i < 63; i++){
                let element = document.getElementById("road"+ i);
                element.classList.remove("road-hover");
            }
            element.classList.remove("hidden");
  
        }
        let roadHandler = (event) => {
            let e = event.target.id;
            let isroad = e.startsWith("road");
            if (isroad) {
            
              console.log("Clicked", e);
              this.addRoad(event.target.id)
              document.body.removeEventListener("click",roadHandler)
            }
          }
        this.callAddRoad = function() {
            document.body.addEventListener("click",roadHandler);
            for(let i = 1; i < 63; i++){
                let element = document.getElementById("road"+ i);
                element.classList.add("road-hover");
            }
        }
        this.resourceRoll = function() {
            roll(1,6);
            rolls = rolls.toString();
            console.log("roll " + rolls);
            Object.keys(board).forEach(function(key) {

                console.log(board[key].number);
                if(rolls == board[key].number){
                    let resource = board[key].resource;
                    console.log(resource);
                    let match = board[key].name.toString();
                    console.log("match " + board[key].number + "on " + match);
                    let object = tileNeighbors[match].houseNeighbor;
                    console.log("object = " + object);
                    object.forEach(function(house){
                       console.log(board[house]);
                       if(board[house].playerOwns){
                           console.log(board[house].playerOwns + " gets a " + resource);
                           let player = board[house].playerOwns;
                           console.log(player);
                           console.log(playerOne[resource]);
                           switch(player) {
                            case playerOne.name:
                            console.log("shaggy");
                                playerOne[resource] += 1;
                              break;
                            case playerTwo.name:
                                playerTwo[resource] += 1;
                              break;
                              case playerThree.name:
                                playerThree[resource] +=1;
                              break;
                              case playerFour.name:
                            playerFour[resource] += 1;
                              break;
                          }
                           
                       }
                   });
                };
              
            });
        }
    }

}

const playerOne = new Player("aaron", "orange");
const playerTwo = new Player("joline", "pink");

let playerTurn = 0;


let endTurn = document.getElementsByClassName("end-button");

function nextTurn(Turn){
    let menuOne = document.getElementById("playerOne-menu");
    let menuTwo = document.getElementById("playerTwo-menu");
    switch(Turn) {
        case 1:
        console.log(playerTurn);

            menuOne.classList.add("hide");
            menuTwo.classList.remove("hide");
            playerTurn = 2;
        break;
        case 2:
        console.log(playerTurn);
          
            menuOne.classList.remove("hide");
            menuTwo.classList.add("hide");
            playerTurn = 1;
        break;
        case 0:
        console.log(playerTurn);
        playerTurn = 1;
        menuOne.classList.remove("hide");
        break;

    }
};

 /*Dice Roll function: this function randomly generates a number between 1 and 6 and adds it to an array.
 the variable number is used to determine the number of dice rolled. */

 function getRandomInt(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
}

function roll(number, sides) {
    let diceRoll = 0;
    let i;
    rolls = [];
    for(i = 0; i < number; i++){
        let roll =  getRandomInt(1, sides);
        diceRoll += roll;
        // console.log(roll);
        rolls.push(roll);
    }
    rolls.sort(function(a, b) {
        return b - a;
      });
    // console.log(rolls);
    // console.log("total " + diceRoll);
    return rolls;
}


function rollOff(x, y) {

    roll(x);
    let rollX = rolls;
    console.log("roll x = ");
    console.log(rollX);
    roll(y);
    let rollY = rolls;
    console.log("roll Y = ");
    console.log(rollY);

    let xLosses = 0;
    let yLosses = 0;
    for(i = 0; i < x; i++){

        console.log("x " + rollX[i]);
        console.log("y " + rollY[i]);
        if (rollX[i] > rollY[i]) {
           console.log("x wins");
           yLosses += 1;
           console.log("y losses = " + yLosses);
        };
        if(rollX[i] < rollY[i]) {
            console.log("Y wins");
            xLosses += 1;
            console.log("X losses = " + xLosses);
        };
    }
    console.log("x total losses " + xLosses);
    console.log("y total losses " + yLosses);
}
